<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>PHP Fog &mdash; Documentation IronWorker</title> 
		<link href="/css/style.css" rel="stylesheet">
		<link href="/css/phpfogdocs.css" rel="stylesheet">
		
		<link rel="icon" type="image/png" href="https://phpfog.com/favicon.ico" />
	</head>
	<body id="blog">
	<div id="header">
		<div class="container">
			<a href="http://appfog.com/" id="app_fog"><img src="http://afblog.phpfogapp.com/wp-content/themes/appfog/images/app-fog.png" width="189" height="47" alt="App Fog"></a>
			<ul id="main_nav">
				<li id="nproducts">
					<a href="#" title="Products" class="parent"><span>Products</span></a>
					<ul>
						<li><a href="http://phpfog.com/">PHP Fog</a></li>
						<li><a href="http://appfog.com/">AppFog</a></li>
					</ul>
				</li>
				<li id="ndocs" class="active"><a href="/" title="Docs">Docs</a></li>
				<li id="nshowcase"><a href="http://appfog.com/showcase/" title="Showcase">Showcase</a></li>
				<li id="nabout"><a href="http://appfog.com/about/" title="About">About</a></li>
				<li id="nsupport"><a href="http://appfog.com/support/" title="Support">Support</a></li>
				<li id="nblog"><a href="http://afblog.phpfogapp.com/" title="Blog">Blog</a></li>
			</ul>
		</div> 
	</div>
	<div id="main_content">
		<div class='container'>

			
			<div id="top_bar" class="row gray_blue margin_bottom">
				<div class="span12">
					<a href="/"><h1 class="title">PHP Fog Docs</h1></a>
					<ul id="docs_nav">
						
						<li class="breadcrumb-separator">&raquo;</li>
						<li><a href="/addons">Add-ons</a></li>
						
						<li class="breadcrumb-separator">&raquo;</li>
						<li><a href="#">IronWorker</a></li>
					</ul>
					<!--<ul id="secondary_nav">
						<li><a href="http://docs.appfog.com">AppFog Docs</a></li>
					</ul>-->
				</div>

			</div>
			
					


			<div id="content" class="row white">
				<div class="span8 main_content">
					<div class="row entries">
	<div class="span8">
		<div class="row">
			<div class="span8">
				<h1>IronWorker</h1>
				<h3 id="install-ironworker">Install IronWorker</h3>

<p>In the “Add-ons” tab in your app console click “Install” for the IronWorker add-on. That’s it!</p>

<h3 id="integrate-ironworker">Integrate IronWorker</h3>

<p>Just copy <a href="https://github.com/iron-io/iron_worker_php/blob/master/IronWorker.class.php">IronWorker.class.php</a> and include it in your script:</p>

<pre><code>&lt;?php
require_once "IronWorker.class.php
</code></pre>

<h3 id="create-a-worker">Create a Worker</h3>

<p>When you install IronWorker, the installer creates two environment variables set with the necessary credentials. Create a worker and pass in those credentials like this:</p>

<pre><code>$worker = new IronWorker(array(
'token' =&gt; getenv('IRON_WORKER_TOKEN'),
'project_id' =&gt; getenv('IRON_WORKER_PROJECT_ID')
));
</code></pre>

<p>Here’s an example worker:</p>

<pre><code>&lt;?php
echo "Hello PHP World!\n";
</code></pre>

<p>We’ll call this worker “HelloWorld.php”.</p>

<h3 id="upload-your-worker">Upload Your Worker</h3>

<p>Here’s how to take the example above, zip it up, and upload it to IronWorker.</p>

<pre><code>&lt;?php
# Zip single file:
IronWorker::createZip(dirname(__FILE__), array('HelloWorld.php'), 'worker.zip', true);
$res = $iw-&gt;postCode('HelloWorld.php', 'worker.zip', 'HelloWorld');
</code></pre>

<h3 id="queue-your-worker">Queue Your Worker</h3>

<pre><code>&lt;?php
$task_id = $iw-&gt;postTask('HelloWorld');
</code></pre>

<p>Your worker should start in a few seconds.</p>

<h3 id="schedule-your-worker">Schedule Your Worker</h3>

<p>If you want to run your code more than once or run it in regular intervals, you can schedule it:</p>

<pre><code>&lt;?php
# 3 minutes from now
$start_at = time() + 3*60;

# Run task every 2 minutes, repeat 10 times
$iw-&gt;postScheduleAdvanced('HelloWorld', array(), $start_at, 2*60, null, 10);
</code></pre>

<h3 id="check-the-status-of-your-worker">Check the Status of Your Worker</h3>

<p>Use the <code>getTaskDetails()</code> method.</p>

<pre><code>&lt;?php
$task_id = $iw-&gt;postTask('HelloWorld');
$details = $iw-&gt;getTaskDetails($task_id);

echo $details-&gt;status; # prints 'queued', 'complete', 'error' etc.
</code></pre>

<h3 id="and-more">And More…</h3>

<p>You can also pass payloads to your tasks, set progress status, logs, etc. For more information, check out some of these resources:</p>

<ul>
  <li><a href="https://github.com/iron-io/iron_worker_php">IronWorker on GitHub</a></li>
  <li><a href="http://iron-io.github.com/iron_worker_php/">IronWorker PHP Reference Documentation</a></li>
  <li><a href="https://github.com/iron-io/iron_worker_php/wiki">IronWorker PHP Wiki</a></li>
  <li><a href="http://docs.iron.io/">Full Documentation on Iron.io</a></li>
</ul>


			</div>
		</div>
	</div>
</div>

				</div>

				<div class="span3 sidebar padding">
					<div class="row border-bottom">
						<div class="span3">
							<form id="search-form" action="/search">
								<input type="search" placeholder="Search" id="search" name="q" size="30" />
								<input class="btn gray_blue search" type="submit" value="Go" />
							</form>
						</div>
					</div>
					<div class="row border-bottom ">
						<div class="span3">
							<a href="/"><h6>PHP Fog Docs</h6></a>
						</div>
					</div>
					<div class="row border-bottom">
						<div class="span3">
							<a href="/getting-started/" ><h6>Getting Started</h6></a>
						</div>
					</div>
					<ul class="pages">
						
						<li><a href="/getting-started/jumpstarts.html" >Jumpstarts</a></li>
						
						<li><a href="/getting-started/pf-command-line-tool.html" >PF Command Line Tool</a></li>
						
						<li><a href="/getting-started/ssh.html" >SSH</a></li>
						
						<li><a href="/getting-started/git.html" >Git</a></li>
						
						<li><a href="/getting-started/env-vars.html" >Environment Variables</a></li>
						
						<li><a href="/getting-started/development.html" >Development</a></li>
						
					</ul>

					<div class="row border-bottom">
						<div class="span3">
							<a href="/customize/" ><h6>Customize Your App</h6></a>
						</div>
					</div>
					<ul class="pages">
						
						<li><a href="/customize/custom-domain-names.html" >Custom Domain Names</a></li>
						
						<li><a href="/customize/ssl.html" >SSL for Custom Domain Names</a></li>
						
						<li><a href="/customize/permissions.html" >Permissions</a></li>
						
						<li><a href="/customize/database.html" >Database</a></li>
						
						<li><a href="/customize/email.html" >Email</a></li>
						
						<li><a href="/customize/php_ini.html" >php.ini</a></li>
						
					</ul>

					<div class="row border-bottom">
						<div class="span3">
							<a href="/best-practices/" ><h6>Best Practices</h6></a>
						</div>
					</div>
					<ul class="pages">
						
						<li><a href="/best-practices/caching.html" >Caching</a></li>
						
						<li><a href="/best-practices/storage.html" >Storage</a></li>
						
						<li><a href="/best-practices/scaling.html" >Scaling</a></li>
						
					</ul>

						<div class="row border-bottom"><div class="span3"><a href="/faqs.html" ><h6>FAQ</h6></div></a></div>
						<div class="row border-bottom"><div class="span3"><a href="http://phpfog.com/pricing"><h6>Pricing</h6></a></div></div>
						<div class="row border-bottom"><div class="span3"><a href="/billing.html" ><h6>Billing</h6></div></a></div>
						<div class="row border-bottom"><div class="span3"><a href="/reliability.html" ><h6>Reliability</h6></div></a></div>
						<div class="row border-bottom"><div class="span3"><a href="/security.html" ><h6>Security</h6></div></a></div>
						<div class="row border-bottom"><div class="span3"><a href="/troubleshooting.html" ><h6>Troubleshooting</h6></div></a></div>

						<div class="row top-link"><div class="span3"><a href="#">&uarr; top</a></div></div>

					</div>
				</div>
			</div><!-- content -->
		</div><!-- container -->
	</div><!-- main_content -->

	<div id="footer">
		<div class="container">
			<div class="row">
				<div class="span1">
					<img src="http://afblog.phpfogapp.com/wp-content/themes/appfog/images/bydevfordev_95.png" width="95" height="79" alt="By Developers For Developers" id="badge">
				</div>
				<div class="span3">
					<h4>About AppFog</h4>
					<p>Easily build and deploy fast, scalable, and reliable applications to the cloud in seconds. Yeah, it’s that easy.</p>					
				</div>
				<div class="span2">
					<h4>Info</h4>
					<ul>
						<li><a href="http://appfog.com/support/">Support</a></li>
						<li><a href="https://appfog.com/about/">About</a></li>
						<li><a href="http://dev.appfog.com/">Documentation</a></li>
					</ul>
				</div>
				<div class="span2 offsettop">
					<ul>
						<li>Phone: 1.888.974.7364</li>
						<li>&copy; <script>document.write(new Date().getFullYear());</script> AppFog.</li>
						<li>All Rights Reserved.</li>
					</ul>
				</div>
				<div class="span4">
					<h4>Social</h4>
					<ul id="social">
						<li id="facebook"><a href="http://www.facebook.com/pages/AppFog/159333004147490">Facebook</a></li>
						<li id="twitter"><a href="https://twitter.com/#!/appfog">Twitter</a></li>
						<li id="linkedin"><a href="http://www.linkedin.com/company/appfog">LinkedIn</a></li>
					</ul>
				</div>
			</div>
		</div> <!-- / .container -->
	</div>
	
	
<!-- scripts -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://afblog.phpfogapp.com/wp-content/themes/appfog/js/libs/jquery-1.7.1.min.js"><\/script>')</script>
<script src="http://afblog.phpfogapp.com/wp-content/themes/appfog/js/plugins.js"></script>
<script src="http://afblog.phpfogapp.com/wp-content/themes/appfog/js/script.js"></script>

</body>
</html>
