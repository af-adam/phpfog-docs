---
title: Scaling
layout: doc-page
weight: 12
---

Scalability is one of the PHP Fog core customer values, along with ease of use, reliability, and performance (speed). As such, we've build an amazing infrastructure to make it super easy to scale your application up and down to reflect the traffic demands. While PHP Fog does provide mechanisms to make it easy to scale, we do not provide a way to scale automatically. This is something that we are working on; however, in the mean time, the question remains: When do I scale?. This article will attempt to answer that question.

Response Time
Your ultimate goal for the website is to have a very low response time. When you get a surge of traffic, this gets compromised because the load is high it takes longer to serve up your application. In other words, you want your application to be damn fast regardless of the traffic load. There are two compelling reasons why you want your website to be fast: usability and search engine ranking.
Usability
The following is a quote from Usability Engineering by Jacob Nielsen,

The basic advice regarding response times has been about the same for thirty years [Miller 1968; Card et al. 1991]:

0.1 second is about the limit for having the user feel that the system is reacting instantaneously, meaning that no special feedback is necessary except to display the result.
1.0 second is about the limit for the user's flow of thought to stay uninterrupted, even though the user will notice the delay. Normally, no special feedback is necessary during delays of more than 0.1 but less than 1.0 second, but the user does lose the feeling of operating directly on the data.

Taking that into account 1.0 seconds should be the threshold for your response time, though ultimately a lower value is better. All of the phpfog.com sites have a response time between 300ms and 900ms, so they average out at around 600ms.
Search Engine Ranking
Google announced that site response time is a factor in how websites get ranked in their article "Using site speed in web search ranking." That's right. If you want your website to be ranked higher in search engines, the response time is now a contributing factor in how it gets ranked.

Prerequisites
Before you try to figure out how to scale your application, you should first focus on improving performance of your website overall. The article "Best Practices for Speeding Up Your Web Site" is an excellent guide for all the rules you should follow to make your site faster before you look at scalability. You should also read our documentation "Handling Large Static Assets" and "Caching" to learn how you can take advantage of the PHP Fog platform for performance.

Monitoring
You must know your response times in order to make them fast. New Relic is a PHP Fog partner and we provide deep integration with that services. In your App Console there is a "Monitor" tab which can redirect you to the login page for New Relic. By signing up for an account with PHP Fog you get a free Bronze account with New Relic too. With New Relic you can monitor the uptime and the response times of your application. They achieve this by ping your servers periodically (e.g. 1 minute, or 5 minutes). Other than Uptime and Response Time monitoring, you can also monitor system performance (e.g. RAM, load) if you are on a dedicated plan (Silver, Gold, Platinum); this is not available for Free plans. In addition to New Relic you can also try another popular service called Pingdom which is great for monitoring response times and uptime as well.

Alerting
Now that you have a goal in mind for response time, and you can setup monitoring, now you need to setup alerts. Once you are familiar with the tools like New Relic and Pingdom, it is easy to setup alerts. We recommend setting two thresholds, one for critical and one for warning. The critical is best set at 1000ms (1.0 second), while the warning level should be at 750ms (3/4 second). This is so you can make sure you have time to react and scale out before you hit the 1.0 second mark.

Reacting
Once you receive the alert it is very easy to react and scale out. If you are on a free plan scaling out is not an option. You must be one the Silver or higher plan in order to scale out, luckily this is very easy to switch from Free to Silver (*side note) in the App Console. Once you scale your application you should continue to monitor for 5-30 minutes to make sure that you have added enough capacity. If it is not enough you can continue adding more.
Usually when traffic increases it is typically in short bursts of traffic. Once you scale your application out, you can come back to the application a few days later (when the traffic comes back to normal levels) and scale back your app to a normal rate. This helps you save money and you'll only pay for what you used.
Side Note: Once you move from Free to Silver (or higher) you can't move back to Free. The Free is on a shared environment, while the paid plans are on a dedicated environment. The shared environment is more restricted than the dedicated environment for security reasons, as such, we can move from the shared to dedicated easily; however, we can't move applications from dedicated to shared as that can break your applications and it is also a security risk.

With Drupal there are a few plugins which can help make the use of Amazon's S3 simpler.  One is:

http://drupal.org/project/amazons3  (This will place them on the file system, then upload them to S3).

Another alternative is load the images to S3 and then setup AWS Cloudfront to deliver those images on behalf of your application.  Drupal has another good module for this feature:
http://drupal.org/project/cdn

Either of these modules will be able to offload assets to a scalable solution & have the extra bonus of reducing the overall load on your application as well.  I personally have used Cloudfront a number of times and have had great success using it.

Lastly I highly suggest setting up drupal to use APC to reduce the load on your cloud even further:

http://drupal.org/project/filecache

With all three of these plugins I highly suggest installing them locally on your development environment to integrate them as a part of your app's source code in the git repository (thereby cementing the plugins and their configuration setting in your app & making your app very scalable).
